#!/bin/bash
# quick deltos search for tags and titles
# this requires jq and percol - 
# jq: https://stedolan.github.io/jq/
# percol: https://github.com/mooz/percol
set -e 
set -u
set -o pipefail

DELTOS_HOME=${DELTOS_HOME:-~/.deltos}
hit=$(cat "$DELTOS_HOME/deltos.cache.json" | \
  jq -r '[.title , (.tags | join(", ") ) , .id] | join(" | ")' | \
  percol | \
  cut -d"|" -f3)

if [ ! -z "$hit" ]; then
    deltos edit $hit
fi

exit 0
  
