// Generated by LiveScript 1.5.0
(function(){
  var ref$, launchEditor, getFilename, dumpTsv, launchSearch, out$ = typeof exports != 'undefined' && exports || this;
  ref$ = require('./util'), launchEditor = ref$.launchEditor, getFilename = ref$.getFilename;
  dumpTsv = require('./db').dumpTsv;
  out$.launchSearch = launchSearch = function(){
    var spawn, stream, fzf, stdin;
    spawn = require('child_process').spawn;
    stream = require('stream');
    fzf = spawn('fzf', {
      stdio: ['pipe', 'pipe', 'inherit'],
      shell: true
    });
    fzf.stdout.setEncoding('utf-8');
    stdin = new stream.Readable();
    dumpTsv(function(it){
      return stdin.push(it + '\n');
    });
    stdin.push(null);
    stdin.pipe(fzf.stdin);
    return fzf.stdout.on('data', function(it){
      var ref$;
      return launchEditor(getFilename((ref$ = it.trim().split('\t'))[ref$.length - 1]));
    });
  };
}).call(this);
